入力値のバリデーション
===============

Web アプリケーションのセキュリティにおいて、ユーザー入力とその関連データを精査しないことは、セキュリティリスクになります。
このリスクに対して、「入力値のバリデーション」と「入力値のサニタイズ」によって対処します。これらは、アプリケーションの各階層で、サーバーの役割に応じて実行する必要があります。重要な注意点は、すべてのデータバリデーション手順は、信頼されたシステム（サーバー）上で行わなければならないことです。

[OWASP SCP Quick Reference Guide][1] には、
入力値のバリデーションをする際に開発者が注意すべき点を 16 の箇条書きで網羅しています。
[Injection][2] が [OWASP Top 10][3] という脆弱性ランキングの 1 位となっていますが、これは開発者がアプリケーションを開発する際に、入力値に対する配慮を欠いてしまっているからです。

ユーザーとのインタラクションは、現在の Web アプリケーションパラダイムにおいて重要な開発要件です。
Web アプリケーションのコンテンツや可能性がリッチになるにつれて、ユーザーとのインタラクションやデータの送信も増加します。こうした Web アプリケーションの進歩の中で、入力値のバリデーションは重要な役割を果たします。

アプリケーションがユーザーデータを扱う場合、入力データは **デフォルトでは「安全でない」とみなさなければならず**、適切なセキュリティチェックが行われた後にのみ受け入れられなければいけません。
また、データソースが信頼できるものか、そうでないかを識別する必要があり、信頼されないソースの場合、検証チェックをしなければいけません。

このセクションでは、テクニックの概要と Go 言語のサンプルを通して問題点を説明します。

* バリデーション
    1. ユーザーインタラクション
        * ホワイトリスティング
        * バウンダリーチェック
        * 文字エスケープ
        * 数値バリデーション
    2. ファイルの操作
    3. データソース
        * システム間整合性チェック
        * ハッシュ合計
        * 参照整合性
        * 一意性チェック
        * テーブル・ルックアップ・チェック
* バリデーションの後
    1. 強制措置
        * アドバイザリーアクション
        * 検証作業
* サニタイズ
    1. UTF-8 の不正チェック
        * 小文字（<）の変換
        * すべてのタグの削除
        * 改行、タブ、余分な空白の削除
        * オクテットの除去
        * URL リクエストパス

[1]: https://www.owasp.org/images/0/08/OWASP_SCP_Quick_Reference_Guide_v2.pdf
[2]: https://www.owasp.org/index.php/Top_10_2013-A1-Injection
[3]: https://www.owasp.org/index.php/Top_10_2013-Top_10
